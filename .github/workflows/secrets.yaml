name: Test secrets

# Controls when the action will run. 
on:
 
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
env:
  REGISTRY_USERNAME: ${{ secrets.REGISTRY_USERNAME }}
  REGISTRY: ${{ secrets.REGISTRY }}
  REGISTRY_PASSWORD: ${{ secrets.REGISTRY_PASSWORD }}
  REGISTRY_EMAIL: ${{ secrets.REGISTRY_EMAIL }}

jobs:
  # This workflow contains a single job called "deploy"
  test_secrets:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          repository: khansaad/hpo
          path: hpo
          ref: openshift_deploy_issue
      - name: Run test
        run: |
          echo Test secrets
          echo "REGISTRY=${{ secrets.REGISTRY }}"
          echo "REGISTRY_USERNAME=${REGISTRY_USERNAME}"
       
          echo "REGISTRY_USERNAME=${{ secrets.REGISTRY_USERNAME }}"
          export REGISTRY=${{ secrets.REGISTRY }}
          export REGISTRY_USERNAME=${{ secrets.REGISTRY_USERNAME }}
          export REGISTRY_PASSWORD=${{ secrets.REGISTRY_PASSWORD }}
          export REGISTRY_EMAIL=${{ secrets.REGISTRY_EMAIL }}
     
          cd tests
          ./test_hpo.sh -c minikube -o kruize/hpo:test  --testsuite=hpo_api_tests --testcase=hpo_sanity_test
         
       
        


